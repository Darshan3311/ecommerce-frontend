{"ast":null,"code":"import api from '../utils/api';\nclass CartService {\n  // Get cart\n  async getCart() {\n    const response = await api.get('/cart');\n    return response.data.cart;\n  }\n\n  // Add to cart\n  async addToCart(productId, quantity = 1) {\n    var _response$data$data;\n    const response = await api.post('/cart/add', {\n      productId,\n      quantity\n    });\n    return response.data.cart || ((_response$data$data = response.data.data) === null || _response$data$data === void 0 ? void 0 : _response$data$data.cart);\n  }\n\n  // Update cart item\n  async updateCartItem(productId, quantity) {\n    var _response$data$data2;\n    const response = await api.put(`/cart/${productId}`, {\n      quantity\n    });\n    return response.data.cart || ((_response$data$data2 = response.data.data) === null || _response$data$data2 === void 0 ? void 0 : _response$data$data2.cart);\n  }\n\n  // Remove from cart\n  async removeFromCart(productId) {\n    var _response$data$data3;\n    const response = await api.delete(`/cart/${productId}`);\n    return response.data.cart || ((_response$data$data3 = response.data.data) === null || _response$data$data3 === void 0 ? void 0 : _response$data$data3.cart);\n  }\n\n  // Clear cart\n  async clearCart() {\n    const response = await api.delete('/cart');\n    return response.data.cart;\n  }\n\n  // Sync cart\n  async syncCart(items) {\n    const response = await api.post('/cart/sync', {\n      items\n    });\n    return response.data.cart;\n  }\n\n  // Local cart management (for non-logged-in users)\n  getLocalCart() {\n    const cartStr = localStorage.getItem('cart');\n    return cartStr ? JSON.parse(cartStr) : {\n      items: [],\n      total: 0\n    };\n  }\n  saveLocalCart(cart) {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n  addToLocalCart(product, quantity = 1) {\n    const cart = this.getLocalCart();\n    const existingItemIndex = cart.items.findIndex(item => item.productListingId === product._id);\n    if (existingItemIndex > -1) {\n      cart.items[existingItemIndex].quantity += quantity;\n    } else {\n      cart.items.push({\n        productListingId: product._id,\n        product: product,\n        quantity: quantity,\n        price: product.price\n      });\n    }\n    cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    this.saveLocalCart(cart);\n    return cart;\n  }\n  removeFromLocalCart(productListingId) {\n    const cart = this.getLocalCart();\n    cart.items = cart.items.filter(item => item.productListingId !== productListingId);\n    cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    this.saveLocalCart(cart);\n    return cart;\n  }\n  clearLocalCart() {\n    localStorage.removeItem('cart');\n  }\n}\nconst cartServiceInstance = new CartService();\nexport default cartServiceInstance;","map":{"version":3,"names":["api","CartService","getCart","response","get","data","cart","addToCart","productId","quantity","_response$data$data","post","updateCartItem","_response$data$data2","put","removeFromCart","_response$data$data3","delete","clearCart","syncCart","items","getLocalCart","cartStr","localStorage","getItem","JSON","parse","total","saveLocalCart","setItem","stringify","addToLocalCart","product","existingItemIndex","findIndex","item","productListingId","_id","push","price","reduce","sum","removeFromLocalCart","filter","clearLocalCart","removeItem","cartServiceInstance"],"sources":["F:/projects/e-com/frontend/src/services/cart.service.js"],"sourcesContent":["import api from '../utils/api';\r\n\r\nclass CartService {\r\n  // Get cart\r\n  async getCart() {\r\n    const response = await api.get('/cart');\r\n    return response.data.cart;\r\n  }\r\n\r\n  // Add to cart\r\n  async addToCart(productId, quantity = 1) {\r\n    const response = await api.post('/cart/add', { productId, quantity });\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Update cart item\r\n  async updateCartItem(productId, quantity) {\r\n    const response = await api.put(`/cart/${productId}`, { quantity });\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Remove from cart\r\n  async removeFromCart(productId) {\r\n    const response = await api.delete(`/cart/${productId}`);\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Clear cart\r\n  async clearCart() {\r\n    const response = await api.delete('/cart');\r\n    return response.data.cart;\r\n  }\r\n\r\n  // Sync cart\r\n  async syncCart(items) {\r\n    const response = await api.post('/cart/sync', { items });\r\n    return response.data.cart;\r\n  }\r\n\r\n  // Local cart management (for non-logged-in users)\r\n  getLocalCart() {\r\n    const cartStr = localStorage.getItem('cart');\r\n    return cartStr ? JSON.parse(cartStr) : { items: [], total: 0 };\r\n  }\r\n\r\n  saveLocalCart(cart) {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n\r\n  addToLocalCart(product, quantity = 1) {\r\n    const cart = this.getLocalCart();\r\n    const existingItemIndex = cart.items.findIndex(item => item.productListingId === product._id);\r\n\r\n    if (existingItemIndex > -1) {\r\n      cart.items[existingItemIndex].quantity += quantity;\r\n    } else {\r\n      cart.items.push({\r\n        productListingId: product._id,\r\n        product: product,\r\n        quantity: quantity,\r\n        price: product.price\r\n      });\r\n    }\r\n\r\n    cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.saveLocalCart(cart);\r\n    return cart;\r\n  }\r\n\r\n  removeFromLocalCart(productListingId) {\r\n    const cart = this.getLocalCart();\r\n    cart.items = cart.items.filter(item => item.productListingId !== productListingId);\r\n    cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.saveLocalCart(cart);\r\n    return cart;\r\n  }\r\n\r\n  clearLocalCart() {\r\n    localStorage.removeItem('cart');\r\n  }\r\n}\r\n\r\nconst cartServiceInstance = new CartService();\r\nexport default cartServiceInstance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}