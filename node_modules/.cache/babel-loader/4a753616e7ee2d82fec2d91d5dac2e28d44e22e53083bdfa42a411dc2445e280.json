{"ast":null,"code":"import api from'../utils/api';class CartService{// Get cart\nasync getCart(){var _response$data$data;const response=await api.get('/cart');return((_response$data$data=response.data.data)===null||_response$data$data===void 0?void 0:_response$data$data.cart)||response.data.cart;}// Add to cart\nasync addToCart(productId){var _response$data$data2;let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const response=await api.post('/cart/add',{productId,quantity});return response.data.cart||((_response$data$data2=response.data.data)===null||_response$data$data2===void 0?void 0:_response$data$data2.cart);}// Update cart item\nasync updateCartItem(productId,quantity){var _response$data$data3;const response=await api.put(\"/cart/\".concat(productId),{quantity});return response.data.cart||((_response$data$data3=response.data.data)===null||_response$data$data3===void 0?void 0:_response$data$data3.cart);}// Remove from cart\nasync removeFromCart(productId){var _response$data$data4;const response=await api.delete(\"/cart/\".concat(productId));return response.data.cart||((_response$data$data4=response.data.data)===null||_response$data$data4===void 0?void 0:_response$data$data4.cart);}// Clear cart\nasync clearCart(){var _response$data$data5;const response=await api.delete('/cart');return response.data.cart||((_response$data$data5=response.data.data)===null||_response$data$data5===void 0?void 0:_response$data$data5.cart);}// Sync cart\nasync syncCart(items){var _response$data$data6;const response=await api.post('/cart/sync',{items});return response.data.cart||((_response$data$data6=response.data.data)===null||_response$data$data6===void 0?void 0:_response$data$data6.cart);}// Local cart management (for non-logged-in users)\ngetLocalCart(){const cartStr=localStorage.getItem('cart');return cartStr?JSON.parse(cartStr):{items:[],total:0};}saveLocalCart(cart){localStorage.setItem('cart',JSON.stringify(cart));}addToLocalCart(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const cart=this.getLocalCart();const existingItemIndex=cart.items.findIndex(item=>item.productId===product._id);if(existingItemIndex>-1){cart.items[existingItemIndex].quantity+=quantity;}else{cart.items.push({productId:product._id,product:product,quantity:quantity,price:product.price});}cart.total=cart.items.reduce((sum,item)=>sum+item.price*item.quantity,0);this.saveLocalCart(cart);return cart;}removeFromLocalCart(productId){const cart=this.getLocalCart();cart.items=cart.items.filter(item=>item.productId!==productId);cart.total=cart.items.reduce((sum,item)=>sum+item.price*item.quantity,0);this.saveLocalCart(cart);return cart;}clearLocalCart(){localStorage.removeItem('cart');}}const cartServiceInstance=new CartService();export default cartServiceInstance;","map":{"version":3,"names":["api","CartService","getCart","_response$data$data","response","get","data","cart","addToCart","productId","_response$data$data2","quantity","arguments","length","undefined","post","updateCartItem","_response$data$data3","put","concat","removeFromCart","_response$data$data4","delete","clearCart","_response$data$data5","syncCart","items","_response$data$data6","getLocalCart","cartStr","localStorage","getItem","JSON","parse","total","saveLocalCart","setItem","stringify","addToLocalCart","product","existingItemIndex","findIndex","item","_id","push","price","reduce","sum","removeFromLocalCart","filter","clearLocalCart","removeItem","cartServiceInstance"],"sources":["F:/projects/e-com/frontend/src/services/cart.service.js"],"sourcesContent":["import api from '../utils/api';\r\n\r\nclass CartService {\r\n  // Get cart\r\n  async getCart() {\r\n    const response = await api.get('/cart');\r\n    return response.data.data?.cart || response.data.cart;\r\n  }\r\n\r\n  // Add to cart\r\n  async addToCart(productId, quantity = 1) {\r\n    const response = await api.post('/cart/add', { productId, quantity });\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Update cart item\r\n  async updateCartItem(productId, quantity) {\r\n    const response = await api.put(`/cart/${productId}`, { quantity });\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Remove from cart\r\n  async removeFromCart(productId) {\r\n    const response = await api.delete(`/cart/${productId}`);\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Clear cart\r\n  async clearCart() {\r\n    const response = await api.delete('/cart');\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Sync cart\r\n  async syncCart(items) {\r\n    const response = await api.post('/cart/sync', { items });\r\n    return response.data.cart || response.data.data?.cart;\r\n  }\r\n\r\n  // Local cart management (for non-logged-in users)\r\n  getLocalCart() {\r\n    const cartStr = localStorage.getItem('cart');\r\n    return cartStr ? JSON.parse(cartStr) : { items: [], total: 0 };\r\n  }\r\n\r\n  saveLocalCart(cart) {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n\r\n  addToLocalCart(product, quantity = 1) {\r\n    const cart = this.getLocalCart();\r\n    const existingItemIndex = cart.items.findIndex(item => item.productId === product._id);\r\n\r\n    if (existingItemIndex > -1) {\r\n      cart.items[existingItemIndex].quantity += quantity;\r\n    } else {\r\n      cart.items.push({\r\n        productId: product._id,\r\n        product: product,\r\n        quantity: quantity,\r\n        price: product.price\r\n      });\r\n    }\r\n\r\n    cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.saveLocalCart(cart);\r\n    return cart;\r\n  }\r\n\r\n  removeFromLocalCart(productId) {\r\n    const cart = this.getLocalCart();\r\n    cart.items = cart.items.filter(item => item.productId !== productId);\r\n    cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.saveLocalCart(cart);\r\n    return cart;\r\n  }\r\n\r\n  clearLocalCart() {\r\n    localStorage.removeItem('cart');\r\n  }\r\n}\r\n\r\nconst cartServiceInstance = new CartService();\r\nexport default cartServiceInstance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}