{"ast":null,"code":"import api from '../utils/api';\nclass CartService {\n  // Get cart\n  async getCart() {\n    var _res$data;\n    // api returns the parsed body { status, data }\n    const res = await api.get('/cart');\n    return (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.cart) || (res === null || res === void 0 ? void 0 : res.cart) || (res === null || res === void 0 ? void 0 : res.data);\n  }\n\n  // Add to cart\n  async addToCart(productId, quantity = 1) {\n    var _res$data2;\n    const res = await api.post('/cart/add', {\n      productId,\n      quantity\n    });\n    return (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.cart) || (res === null || res === void 0 ? void 0 : res.cart) || (res === null || res === void 0 ? void 0 : res.data);\n  }\n\n  // Update cart item\n  async updateCartItem(productId, quantity) {\n    var _res$data3;\n    const res = await api.put(`/cart/${productId}`, {\n      quantity\n    });\n    return (res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.cart) || (res === null || res === void 0 ? void 0 : res.cart) || (res === null || res === void 0 ? void 0 : res.data);\n  }\n\n  // Remove from cart\n  async removeFromCart(productId) {\n    var _res$data4;\n    const res = await api.delete(`/cart/${productId}`);\n    return (res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.cart) || (res === null || res === void 0 ? void 0 : res.cart) || (res === null || res === void 0 ? void 0 : res.data);\n  }\n\n  // Clear cart\n  async clearCart() {\n    var _res$data5;\n    const res = await api.delete('/cart');\n    return (res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.cart) || (res === null || res === void 0 ? void 0 : res.cart) || (res === null || res === void 0 ? void 0 : res.data);\n  }\n\n  // Sync cart\n  async syncCart(items) {\n    var _res$data6;\n    const res = await api.post('/cart/sync', {\n      items\n    });\n    return (res === null || res === void 0 ? void 0 : (_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.cart) || (res === null || res === void 0 ? void 0 : res.cart) || (res === null || res === void 0 ? void 0 : res.data);\n  }\n\n  // Local cart management (for non-logged-in users)\n  getLocalCart() {\n    const cartStr = localStorage.getItem('cart');\n    // Ensure local cart shape matches server cart shape (includes subtotal, tax, total)\n    if (cartStr) return JSON.parse(cartStr);\n    return {\n      items: [],\n      subtotal: 0,\n      tax: 0,\n      total: 0\n    };\n  }\n  saveLocalCart(cart) {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n  addToLocalCart(product, quantity = 1) {\n    const cart = this.getLocalCart();\n    const existingItemIndex = cart.items.findIndex(item => item.productId === product._id);\n    if (existingItemIndex > -1) {\n      cart.items[existingItemIndex].quantity += quantity;\n    } else {\n      cart.items.push({\n        productId: product._id,\n        product: product,\n        quantity: quantity,\n        price: product.price\n      });\n    }\n    cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    this.saveLocalCart(cart);\n    return cart;\n  }\n  removeFromLocalCart(productId) {\n    const cart = this.getLocalCart();\n    cart.items = cart.items.filter(item => item.productId !== productId);\n    cart.total = cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    this.saveLocalCart(cart);\n    return cart;\n  }\n  clearLocalCart() {\n    localStorage.removeItem('cart');\n  }\n}\nconst cartServiceInstance = new CartService();\nexport default cartServiceInstance;","map":{"version":3,"names":["api","CartService","getCart","_res$data","res","get","data","cart","addToCart","productId","quantity","_res$data2","post","updateCartItem","_res$data3","put","removeFromCart","_res$data4","delete","clearCart","_res$data5","syncCart","items","_res$data6","getLocalCart","cartStr","localStorage","getItem","JSON","parse","subtotal","tax","total","saveLocalCart","setItem","stringify","addToLocalCart","product","existingItemIndex","findIndex","item","_id","push","price","reduce","sum","removeFromLocalCart","filter","clearLocalCart","removeItem","cartServiceInstance"],"sources":["F:/projects/e-com/frontend/src/services/cart.service.js"],"sourcesContent":["import api from '../utils/api';\r\n\r\nclass CartService {\r\n  // Get cart\r\n  async getCart() {\r\n    // api returns the parsed body { status, data }\r\n    const res = await api.get('/cart');\r\n    return res?.data?.cart || res?.cart || res?.data;\r\n  }\r\n\r\n  // Add to cart\r\n  async addToCart(productId, quantity = 1) {\r\n    const res = await api.post('/cart/add', { productId, quantity });\r\n    return res?.data?.cart || res?.cart || res?.data;\r\n  }\r\n\r\n  // Update cart item\r\n  async updateCartItem(productId, quantity) {\r\n    const res = await api.put(`/cart/${productId}`, { quantity });\r\n    return res?.data?.cart || res?.cart || res?.data;\r\n  }\r\n\r\n  // Remove from cart\r\n  async removeFromCart(productId) {\r\n    const res = await api.delete(`/cart/${productId}`);\r\n    return res?.data?.cart || res?.cart || res?.data;\r\n  }\r\n\r\n  // Clear cart\r\n  async clearCart() {\r\n    const res = await api.delete('/cart');\r\n    return res?.data?.cart || res?.cart || res?.data;\r\n  }\r\n\r\n  // Sync cart\r\n  async syncCart(items) {\r\n    const res = await api.post('/cart/sync', { items });\r\n    return res?.data?.cart || res?.cart || res?.data;\r\n  }\r\n\r\n  // Local cart management (for non-logged-in users)\r\n  getLocalCart() {\r\n    const cartStr = localStorage.getItem('cart');\r\n    // Ensure local cart shape matches server cart shape (includes subtotal, tax, total)\r\n    if (cartStr) return JSON.parse(cartStr);\r\n    return { items: [], subtotal: 0, tax: 0, total: 0 };\r\n  }\r\n\r\n  saveLocalCart(cart) {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n\r\n  addToLocalCart(product, quantity = 1) {\r\n    const cart = this.getLocalCart();\r\n    const existingItemIndex = cart.items.findIndex(item => item.productId === product._id);\r\n\r\n    if (existingItemIndex > -1) {\r\n      cart.items[existingItemIndex].quantity += quantity;\r\n    } else {\r\n      cart.items.push({\r\n        productId: product._id,\r\n        product: product,\r\n        quantity: quantity,\r\n        price: product.price\r\n      });\r\n    }\r\n\r\n    cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.saveLocalCart(cart);\r\n    return cart;\r\n  }\r\n\r\n  removeFromLocalCart(productId) {\r\n    const cart = this.getLocalCart();\r\n    cart.items = cart.items.filter(item => item.productId !== productId);\r\n    cart.total = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.saveLocalCart(cart);\r\n    return cart;\r\n  }\r\n\r\n  clearLocalCart() {\r\n    localStorage.removeItem('cart');\r\n  }\r\n}\r\n\r\nconst cartServiceInstance = new CartService();\r\nexport default cartServiceInstance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}