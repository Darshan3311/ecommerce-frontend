{"ast":null,"code":"import _objectSpread from\"F:/projects/e-com/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,Link,useLocation}from'react-router-dom';import{useFormik}from'formik';import*as Yup from'yup';import useAuthStore from'../../store/useAuthStore';import useCartStore from'../../store/useCartStore';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const[isLoading,setIsLoading]=useState(false);const{login,isAuthenticated}=useAuthStore();const{syncCart}=useCartStore();// Get the page they were trying to access, or default to dashboard\nconst from=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||'/dashboard';// Redirect if already logged in\nuseEffect(()=>{if(isAuthenticated){navigate('/dashboard',{replace:true});}},[isAuthenticated,navigate]);const formik=useFormik({initialValues:{email:'',password:''},validationSchema:Yup.object({email:Yup.string().email('Invalid email address').required('Email is required'),password:Yup.string().min(6,'Password must be at least 6 characters').required('Password is required')}),onSubmit:async values=>{setIsLoading(true);try{await login(values);await syncCart();toast.success('Login successful!');navigate(from,{replace:true});}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed');}finally{setIsLoading(false);}}});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-[80vh] flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"create a new account\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-center text-sm text-gray-600\",children:/*#__PURE__*/_jsx(Link,{to:\"/seller/register\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"Register as Seller\"})})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md shadow-sm space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",className:\"input \".concat(formik.touched.email&&formik.errors.email?'border-red-500':''),placeholder:\"Enter your email\"},formik.getFieldProps('email'))),formik.touched.email&&formik.errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formik.errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"password\",name:\"password\",type:\"password\",autoComplete:\"current-password\",className:\"input \".concat(formik.touched.password&&formik.errors.password?'border-red-500':''),placeholder:\"Enter your password\"},formik.getFieldProps('password'))),formik.touched.password&&formik.errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formik.errors.password})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"remember-me\",type:\"checkbox\",className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-900\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"Forgot your password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full btn btn-primary\",children:isLoading?'Signing in...':'Sign in'})})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","useLocation","useFormik","Yup","useAuthStore","useCartStore","toast","jsx","_jsx","jsxs","_jsxs","LoginPage","_location$state","navigate","location","isLoading","setIsLoading","login","isAuthenticated","syncCart","from","state","replace","formik","initialValues","email","password","validationSchema","object","string","required","min","onSubmit","values","success","error","_error$response","_error$response$data","response","data","message","className","children","to","handleSubmit","htmlFor","_objectSpread","id","name","type","autoComplete","concat","touched","errors","placeholder","getFieldProps","disabled"],"sources":["F:/projects/e-com/frontend/src/pages/auth/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport useAuthStore from '../../store/useAuthStore';\r\nimport useCartStore from '../../store/useCartStore';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst LoginPage = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { login, isAuthenticated } = useAuthStore();\r\n  const { syncCart } = useCartStore();\r\n\r\n  // Get the page they were trying to access, or default to dashboard\r\n  const from = location.state?.from || '/dashboard';\r\n\r\n  // Redirect if already logged in\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      navigate('/dashboard', { replace: true });\r\n    }\r\n  }, [isAuthenticated, navigate]);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: '',\r\n      password: ''\r\n    },\r\n    validationSchema: Yup.object({\r\n      email: Yup.string()\r\n        .email('Invalid email address')\r\n        .required('Email is required'),\r\n      password: Yup.string()\r\n        .min(6, 'Password must be at least 6 characters')\r\n        .required('Password is required')\r\n    }),\r\n    onSubmit: async (values) => {\r\n      setIsLoading(true);\r\n      try {\r\n        await login(values);\r\n        await syncCart();\r\n        toast.success('Login successful!');\r\n        navigate(from, { replace: true });\r\n      } catch (error) {\r\n        toast.error(error.response?.data?.message || 'Login failed');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"min-h-[80vh] flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Sign in to your account\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            Or{' '}\r\n            <Link to=\"/register\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n              create a new account\r\n            </Link>\r\n          </p>\r\n          <p className=\"mt-1 text-center text-sm text-gray-600\">\r\n            <Link to=\"/seller/register\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n              Register as Seller\r\n            </Link>\r\n          </p>\r\n        </div>\r\n\r\n        <form className=\"mt-8 space-y-6\" onSubmit={formik.handleSubmit}>\r\n          <div className=\"rounded-md shadow-sm space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                className={`input ${formik.touched.email && formik.errors.email ? 'border-red-500' : ''}`}\r\n                placeholder=\"Enter your email\"\r\n                {...formik.getFieldProps('email')}\r\n              />\r\n              {formik.touched.email && formik.errors.email && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{formik.errors.email}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                className={`input ${formik.touched.password && formik.errors.password ? 'border-red-500' : ''}`}\r\n                placeholder=\"Enter your password\"\r\n                {...formik.getFieldProps('password')}\r\n              />\r\n              {formik.touched.password && formik.errors.password && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{formik.errors.password}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                id=\"remember-me\"\r\n                name=\"remember-me\"\r\n                type=\"checkbox\"\r\n                className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n              />\r\n              <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                Remember me\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"text-sm\">\r\n              <Link to=\"/forgot-password\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n                Forgot your password?\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full btn btn-primary\"\r\n            >\r\n              {isLoading ? 'Signing in...' : 'Sign in'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}