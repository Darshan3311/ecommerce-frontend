{"ast":null,"code":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport wishlistService from '../services/wishlist.service';\nimport { toast } from 'react-hot-toast';\nconst useWishlistStore = create(persist((set, get) => ({\n  wishlist: null,\n  loading: false,\n  // Fetch wishlist\n  fetchWishlist: async () => {\n    try {\n      set({\n        loading: true\n      });\n      const response = await wishlistService.getWishlist();\n      console.log('Wishlist fetched:', response);\n      set({\n        wishlist: response.data,\n        loading: false\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response;\n      console.error('Fetch wishlist error:', error);\n      set({\n        loading: false\n      });\n      // Don't show error toast for unauthenticated users\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) !== 401) {\n        toast.error('Failed to load wishlist');\n      }\n      throw error;\n    }\n  },\n  // Add to wishlist\n  addToWishlist: async productId => {\n    try {\n      console.log('Adding to wishlist:', productId);\n      const response = await wishlistService.addToWishlist(productId);\n      console.log('Add wishlist response:', response);\n      set({\n        wishlist: response.data\n      });\n      toast.success('Added to wishlist');\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Add to wishlist error:', error);\n      const message = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to add to wishlist';\n      toast.error(message);\n      throw error;\n    }\n  },\n  // Remove from wishlist\n  removeFromWishlist: async productId => {\n    try {\n      const response = await wishlistService.removeFromWishlist(productId);\n      set({\n        wishlist: response.data\n      });\n      toast.success('Removed from wishlist');\n      return response.data;\n    } catch (error) {\n      console.error('Remove from wishlist error:', error);\n      toast.error('Failed to remove from wishlist');\n      throw error;\n    }\n  },\n  // Toggle wishlist (add or remove)\n  toggleWishlist: async productId => {\n    var _wishlist$items;\n    const {\n      wishlist\n    } = get();\n    const isInWishlist = wishlist === null || wishlist === void 0 ? void 0 : (_wishlist$items = wishlist.items) === null || _wishlist$items === void 0 ? void 0 : _wishlist$items.some(item => item.product._id === productId || item.product === productId);\n    if (isInWishlist) {\n      return get().removeFromWishlist(productId);\n    } else {\n      return get().addToWishlist(productId);\n    }\n  },\n  // Check if product is in wishlist\n  isInWishlist: productId => {\n    var _wishlist$items2;\n    const {\n      wishlist\n    } = get();\n    return (wishlist === null || wishlist === void 0 ? void 0 : (_wishlist$items2 = wishlist.items) === null || _wishlist$items2 === void 0 ? void 0 : _wishlist$items2.some(item => item.product._id === productId || item.product === productId)) || false;\n  },\n  // Get wishlist item count\n  getWishlistCount: () => {\n    var _wishlist$items3;\n    const {\n      wishlist\n    } = get();\n    return (wishlist === null || wishlist === void 0 ? void 0 : (_wishlist$items3 = wishlist.items) === null || _wishlist$items3 === void 0 ? void 0 : _wishlist$items3.length) || 0;\n  },\n  // Clear wishlist\n  clearWishlist: async () => {\n    try {\n      await wishlistService.clearWishlist();\n      set({\n        wishlist: {\n          items: []\n        }\n      });\n      toast.success('Wishlist cleared');\n    } catch (error) {\n      console.error('Clear wishlist error:', error);\n      toast.error('Failed to clear wishlist');\n      throw error;\n    }\n  },\n  // Move to cart\n  moveToCart: async productId => {\n    try {\n      const response = await wishlistService.moveToCart(productId);\n      set({\n        wishlist: response.data.wishlist\n      });\n      toast.success('Moved to cart');\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Move to cart error:', error);\n      const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Failed to move to cart';\n      toast.error(message);\n      throw error;\n    }\n  },\n  // Reset wishlist (on logout)\n  resetWishlist: () => {\n    set({\n      wishlist: null,\n      loading: false\n    });\n  }\n}), {\n  name: 'wishlist-storage',\n  partialize: state => ({\n    wishlist: state.wishlist\n  })\n}));\nexport default useWishlistStore;","map":{"version":3,"names":["create","persist","wishlistService","toast","useWishlistStore","set","get","wishlist","loading","fetchWishlist","response","getWishlist","console","log","data","error","_error$response","status","addToWishlist","productId","success","_error$response2","_error$response2$data","message","removeFromWishlist","toggleWishlist","_wishlist$items","isInWishlist","items","some","item","product","_id","_wishlist$items2","getWishlistCount","_wishlist$items3","length","clearWishlist","moveToCart","_error$response3","_error$response3$data","resetWishlist","name","partialize","state"],"sources":["F:/projects/e-com/frontend/src/store/useWishlistStore.js"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport wishlistService from '../services/wishlist.service';\r\nimport { toast } from 'react-hot-toast';\r\n\r\nconst useWishlistStore = create(\r\n  persist(\r\n    (set, get) => ({\r\n      wishlist: null,\r\n      loading: false,\r\n\r\n      // Fetch wishlist\r\n      fetchWishlist: async () => {\r\n        try {\r\n          set({ loading: true });\r\n          const response = await wishlistService.getWishlist();\r\n          console.log('Wishlist fetched:', response);\r\n          set({ wishlist: response.data, loading: false });\r\n          return response.data;\r\n        } catch (error) {\r\n          console.error('Fetch wishlist error:', error);\r\n          set({ loading: false });\r\n          // Don't show error toast for unauthenticated users\r\n          if (error.response?.status !== 401) {\r\n            toast.error('Failed to load wishlist');\r\n          }\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      // Add to wishlist\r\n      addToWishlist: async (productId) => {\r\n        try {\r\n          console.log('Adding to wishlist:', productId);\r\n          const response = await wishlistService.addToWishlist(productId);\r\n          console.log('Add wishlist response:', response);\r\n          set({ wishlist: response.data });\r\n          toast.success('Added to wishlist');\r\n          return response.data;\r\n        } catch (error) {\r\n          console.error('Add to wishlist error:', error);\r\n          const message = error.response?.data?.message || 'Failed to add to wishlist';\r\n          toast.error(message);\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      // Remove from wishlist\r\n      removeFromWishlist: async (productId) => {\r\n        try {\r\n          const response = await wishlistService.removeFromWishlist(productId);\r\n          set({ wishlist: response.data });\r\n          toast.success('Removed from wishlist');\r\n          return response.data;\r\n        } catch (error) {\r\n          console.error('Remove from wishlist error:', error);\r\n          toast.error('Failed to remove from wishlist');\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      // Toggle wishlist (add or remove)\r\n      toggleWishlist: async (productId) => {\r\n        const { wishlist } = get();\r\n        const isInWishlist = wishlist?.items?.some(\r\n          item => item.product._id === productId || item.product === productId\r\n        );\r\n\r\n        if (isInWishlist) {\r\n          return get().removeFromWishlist(productId);\r\n        } else {\r\n          return get().addToWishlist(productId);\r\n        }\r\n      },\r\n\r\n      // Check if product is in wishlist\r\n      isInWishlist: (productId) => {\r\n        const { wishlist } = get();\r\n        return wishlist?.items?.some(\r\n          item => item.product._id === productId || item.product === productId\r\n        ) || false;\r\n      },\r\n\r\n      // Get wishlist item count\r\n      getWishlistCount: () => {\r\n        const { wishlist } = get();\r\n        return wishlist?.items?.length || 0;\r\n      },\r\n\r\n      // Clear wishlist\r\n      clearWishlist: async () => {\r\n        try {\r\n          await wishlistService.clearWishlist();\r\n          set({ wishlist: { items: [] } });\r\n          toast.success('Wishlist cleared');\r\n        } catch (error) {\r\n          console.error('Clear wishlist error:', error);\r\n          toast.error('Failed to clear wishlist');\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      // Move to cart\r\n      moveToCart: async (productId) => {\r\n        try {\r\n          const response = await wishlistService.moveToCart(productId);\r\n          set({ wishlist: response.data.wishlist });\r\n          toast.success('Moved to cart');\r\n          return response.data;\r\n        } catch (error) {\r\n          console.error('Move to cart error:', error);\r\n          const message = error.response?.data?.message || 'Failed to move to cart';\r\n          toast.error(message);\r\n          throw error;\r\n        }\r\n      },\r\n\r\n      // Reset wishlist (on logout)\r\n      resetWishlist: () => {\r\n        set({ wishlist: null, loading: false });\r\n      }\r\n    }),\r\n    {\r\n      name: 'wishlist-storage',\r\n      partialize: (state) => ({ wishlist: state.wishlist })\r\n    }\r\n  )\r\n);\r\n\r\nexport default useWishlistStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}